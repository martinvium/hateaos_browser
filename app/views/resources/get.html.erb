<h1>HATEAOS Browser</h1>
<p class="lead">GET <%= @uri %></p>

<% unless @resource.links.empty? %>
  <h2 class="sub-header">Links</h2>
  <table class="table table-striped">
    <tbody>
    <% @resource.links.each do|name,link| %>
      <tr>
        <td><%= link_to name.humanize, get_project_resource_path(uri: link) %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
<% end %>

<% unless @resource.children.empty? %>
  <h2 class="sub-header">Resources</h2>
  <table class="table table-striped">
    <thead>
      <tr>
      <% @resource.children.first.data.keys.each do|key| %>
        <th><%= key.to_s.humanize %></th>
      <% end %>
      </tr>
    </thead>
    <tbody>
    <% @resource.children.each do|resource| %>
      <tr>
      <% resource.data.each do|k,v| %>
        <% if v.respond_to?(:each) %>
          <td><%= Resource.humanize_collection(v) %></td>
        <% else %>
          <td><%= v %></td>
        <% end %>
      <% end %>
      </tr>
    <% end %>
    </tbody>
  </table>
<% end %>